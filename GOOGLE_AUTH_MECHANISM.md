# üîê –ú–µ—Ö–∞–Ω–∏–∑–º Google OAuth –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

## üìã –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –º–µ—Ö–∞–Ω–∏–∑–º

### 1. **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –≤—Ö–æ–¥–µ —á–µ—Ä–µ–∑ Google**

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å Google"**
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `signInWithGoogle()` –∏–∑ `lib/supabase.ts`
   - –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ Google OAuth —Å—Ç—Ä–∞–Ω–∏—Ü—É

2. **Google OAuth –æ–±—Ä–∞–±–æ—Ç–∫–∞**
   - Supabase **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** –≤ `auth.users`, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
   - –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Ö–æ–¥
   - **–í–∞–∂–Ω–æ:** OAuth —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ –¥–ª—è –≤—Ö–æ–¥–∞ –ò —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏!

3. **Callback –ø–æ—Å–ª–µ Google –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** (`/auth/callback`)
   - –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Google (email, –∏–º—è, –∞–≤–∞—Ç–∞—Ä–∫–∞)
   - –í—ã–∑—ã–≤–∞–µ—Ç `ensureSpecialistProfile()` –∫–æ—Ç–æ—Ä—ã–π:
     - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –ø—Ä–æ—Ñ–∏–ª—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ `specialists`
     - **–ï—Å–ª–∏ –ø—Ä–æ—Ñ–∏–ª—è –ù–ï–¢** ‚Üí —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ Google:
       - –ò–º—è –∏–∑ Google –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (`user_metadata.full_name` –∏–ª–∏ `name`)
       - Email –∏–∑ Google –∞–∫–∫–∞—É–Ω—Ç–∞
       - –ê–≤–∞—Ç–∞—Ä–∫–∞ –∏–∑ Google (`user_metadata.picture` –∏–ª–∏ `avatar_url`)
       - –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "–î–∏–∑–∞–π–Ω"
       - `show_in_search: false` (–∫–∞—Ä—Ç–æ—á–∫–∞ –Ω–µ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
     - **–ï—Å–ª–∏ –ø—Ä–æ—Ñ–∏–ª—å –£–ñ–ï –ï–°–¢–¨** ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç –∞–≤–∞—Ç–∞—Ä–∫—É, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç

4. **–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**
   - –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ `/specialists`

### 2. **–ú–µ—Ö–∞–Ω–∏–∑–º `ensureSpecialistProfile`**

```typescript
// –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
const existing = await supabase
  .from('specialists')
  .select('id, avatar_url')
  .eq('id', id)
  .limit(1)

// –ï—Å–ª–∏ –ø—Ä–æ—Ñ–∏–ª—è –Ω–µ—Ç - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π
if (!existing || existing.length === 0) {
  await supabase.from('specialists').insert({
    id: user.id,
    email: normalizedEmail,
    first_name: firstName,
    last_name: lastName,
    specialization: '–î–∏–∑–∞–π–Ω',
    show_in_search: false,
    avatar_url: avatarUrl || null,
  })
}

// –ï—Å–ª–∏ –ø—Ä–æ—Ñ–∏–ª—å –µ—Å—Ç—å - –æ–±–Ω–æ–≤–ª—è–µ—Ç –∞–≤–∞—Ç–∞—Ä–∫—É, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
if (avatarUrl && !currentProfile.avatar_url) {
  await supabase
    .from('specialists')
    .update({ avatar_url: avatarUrl })
    .eq('id', id)
}
```

## ‚úÖ –¢–µ–∫—É—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞** –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ —á–µ—Ä–µ–∑ Google
2. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞** —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ Google
3. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥** –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
4. ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∫–∏** –∏–∑ Google, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç –≤ –ø—Ä–æ—Ñ–∏–ª–µ
5. ‚úÖ **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–º–µ–Ω–∏** –∏–∑ Google –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (`full_name` –∏–ª–∏ `name`)

### –ß—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–ª—É—á—à–µ–Ω–æ:

1. ‚ö†Ô∏è **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ Google –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–º—è**
   - –°–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `deriveDisplayName()` –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–µ—Ç –∏–º—è –∏–∑ email
   - –ú–æ–∂–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤–≤–µ—Å—Ç–∏ –∏–º—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ—Ñ–∏–ª—è

2. ‚ö†Ô∏è **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ Google**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ email –≤—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è
   - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç

## üéØ –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—Ö–æ–¥–∞ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: –ï–¥–∏–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/auth`

–°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/app/auth/page.tsx` —Å:
- **–û—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–±:** –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å Google"
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–±:** Email/password —Ñ–æ—Ä–º–∞ (–ø–æ –∫–ª–∏–∫—É "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ email")
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞ –¥–ª—è –≤—Ö–æ–¥–∞ –ò —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Google

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

1. ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** - –æ–¥–Ω–∞ –∫–Ω–æ–ø–∫–∞ –¥–ª—è –≤—Å–µ–≥–æ
2. ‚úÖ **–ú–µ–Ω—å—à–µ —à–∞–≥–æ–≤** - –Ω–µ –Ω—É–∂–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å –º–µ–∂–¥—É –≤—Ö–æ–¥–æ–º –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π
3. ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - Google OAuth –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
4. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è** - –≤—Å—ë –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

1. **–î–ª—è Google –≤—Ö–æ–¥–∞ (–æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–±):**
   ```
   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å Google" ‚Üí Google OAuth ‚Üí Callback ‚Üí –ü—Ä–æ—Ñ–∏–ª—å —Å–æ–∑–¥–∞–µ—Ç—Å—è/–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è ‚Üí –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
   ```

2. **–î–ª—è email/password (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–±):**
   ```
   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ email" ‚Üí –§–æ—Ä–º–∞ ‚Üí –í—Ö–æ–¥ ‚Üí –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
   ```

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –û–±–Ω–æ–≤–∏—Ç—å —Å—Å—ã–ª–∫–∏ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

–í `components/Navbar.tsx` –∏ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö, –≥–¥–µ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ `/login`:
```tsx
// –°—Ç–∞—Ä–æ–µ:
<Link href="/login">–í–æ–π—Ç–∏</Link>

// –ù–æ–≤–æ–µ:
<Link href="/auth">–í–æ–π—Ç–∏</Link>
```

### 2. –†–µ–¥–∏—Ä–µ–∫—Ç —Å–æ —Å—Ç–∞—Ä—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –µ–¥–∏–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã:
- `/login` ‚Üí `/auth`
- `/register` ‚Üí `/auth` (–∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ email)

### 3. –£–ª—É—á—à–µ–Ω–∏–µ UX –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Google

–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Google –º–æ–∂–Ω–æ:
- –ü–æ–∫–∞–∑–∞—Ç—å welcome —Å–æ–æ–±—â–µ–Ω–∏–µ
- –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å (—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, bio, –∏ —Ç.–¥.)
- –ù–∞–ø–æ–º–Ω–∏—Ç—å –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É (`show_in_search: true`)

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Å–ª—É—á–∞–∏:
- Google OAuth –æ—Ç–∫–ª–æ–Ω–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ email –≤ Google –∞–∫–∫–∞—É–Ω—Ç–µ (–º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ, –Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ)

## üìù –ò—Ç–æ–≥–∏

### –¢–µ–∫—É—â–∏–π –º–µ—Ö–∞–Ω–∏–∑–º:
‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!** –ü—Ä–æ—Ñ–∏–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ —á–µ—Ä–µ–∑ Google

### –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—Ö–æ–¥–∞ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ!** –°–æ–∑–¥–∞–Ω–∞ –µ–¥–∏–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/auth` —Å –∫–Ω–æ–ø–∫–æ–π "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å Google"

### –ß—Ç–æ –¥–∞–ª—å—à–µ:
1. –û–±–Ω–æ–≤–∏—Ç—å —Å—Å—ã–ª–∫–∏ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –Ω–∞ `/auth`
2. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã —Å–æ —Å—Ç–∞—Ä—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–æ–∫: –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí Google ‚Üí –ø—Ä–æ—Ñ–∏–ª—å —Å–æ–∑–¥–∞–µ—Ç—Å—è
4. –£–ª—É—á—à–∏—Ç—å UX –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞ (welcome message, –ø–æ–¥—Å–∫–∞–∑–∫–∏)

